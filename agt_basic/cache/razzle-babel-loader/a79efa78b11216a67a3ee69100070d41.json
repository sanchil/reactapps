{"ast":null,"code":"import _defineProperty from \"/home/azure/spaces/reactapps/agt_basic/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '../../state/appcntxt';\nimport { clipImage } from '../../lib/utils';\nimport { ImgCloud } from './components';\nvar useCnvStyles = makeStyles(function (theme) {\n  var _img;\n\n  return {\n    rootcontainer: {\n      boxSizing: 'border-box',\n      position: 'relative',\n      display: 'flex',\n      flex: 'auto',\n      flexFlow: 'row wrap',\n      width: '100%',\n      maxWidth: '100%',\n      height: '100%' //  cursor:'pointer',\n      //  padding:20,\n\n    },\n    img: (_img = {}, _defineProperty(_img, theme.breakpoints.up('xs'), {\n      borderTopRightRadius: function borderTopRightRadius(props) {\n        return props.position === \"topleft\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderTopLeftRadius: function borderTopLeftRadius(props) {\n        return props.position === \"topleft\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderBottomRightRadius: function borderBottomRightRadius(props) {\n        return props.position === \"bottomright\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderBottomLeftRadius: function borderBottomLeftRadius(props) {\n        return props.position === \"bottomright\" || props.position === \"all\" ? 15 : 0;\n      }\n    }), _defineProperty(_img, theme.breakpoints.up('md'), {\n      borderTopRightRadius: function borderTopRightRadius(props) {\n        return props.position === \"topright\" || props.position === \"top\" || props.position === \"topbottom\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderTopLeftRadius: function borderTopLeftRadius(props) {\n        return props.position === \"topleft\" || props.position === \"top\" || props.position === \"topbottom\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderBottomRightRadius: function borderBottomRightRadius(props) {\n        return props.position === \"bottomright\" || props.position === \"topbottom\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderBottomLeftRadius: function borderBottomLeftRadius(props) {\n        return props.position === \"bottomleft\" || props.position === \"topbottom\" || props.position === \"all\" ? 15 : 0;\n      }\n    }), _defineProperty(_img, \"position\", 'relative'), _defineProperty(_img, \"boxSizing\", 'border-box'), _defineProperty(_img, \"width\", '100%'), _defineProperty(_img, \"height\", '100%'), _defineProperty(_img, \"objectFit\", 'cover'), _img)\n  };\n});\nexport var Cnv = function Cnv(props) {\n  var classes = useCnvStyles(props);\n\n  var _useContext = useContext(AppContext),\n      appstate = _useContext.appstate,\n      dispatch = _useContext.dispatch;\n\n  var _useState = useState(null),\n      dataUrl = _useState[0],\n      setDataUrl = _useState[1];\n\n  useEffect(function () {\n    var abortController = new AbortController();\n    clipImage(props.w, props.h, props.src, {\n      signal: abortController.signal\n    }).then(function (dataurl) {\n      return setDataUrl(dataurl);\n    })[\"catch\"](function (err) {\n      return console.log(\"Image load error: \" + err.message);\n    });\n    return function () {\n      abortController.abort();\n    };\n  });\n\n  var handleOverLay = function handleOverLay(evt) {\n    dispatch({\n      type: 'OVERLAY',\n      data: true\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: classes.rootcontainer\n  }, __jsx(\"img\", {\n    src: dataUrl,\n    className: classes.img\n  }), props.overlay ? props.children : \"\");\n};\nvar useCnvCloudStyles = makeStyles(function (theme) {\n  var _img2;\n\n  return {\n    rootcontainer: {\n      boxSizing: 'border-box',\n      position: 'relative',\n      display: 'flex',\n      flex: 'auto',\n      flexFlow: 'row wrap',\n      width: '100%',\n      maxWidth: '100%',\n      height: '100%' //  cursor:'pointer',\n      //  padding:20,\n\n    },\n    img: (_img2 = {}, _defineProperty(_img2, theme.breakpoints.up('xs'), {\n      borderTopRightRadius: function borderTopRightRadius(props) {\n        return props.position === \"topleft\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderTopLeftRadius: function borderTopLeftRadius(props) {\n        return props.position === \"topleft\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderBottomRightRadius: function borderBottomRightRadius(props) {\n        return props.position === \"bottomright\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderBottomLeftRadius: function borderBottomLeftRadius(props) {\n        return props.position === \"bottomright\" || props.position === \"all\" ? 15 : 0;\n      }\n    }), _defineProperty(_img2, theme.breakpoints.up('md'), {\n      borderTopRightRadius: function borderTopRightRadius(props) {\n        return props.position === \"topright\" || props.position === \"top\" || props.position === \"topbottom\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderTopLeftRadius: function borderTopLeftRadius(props) {\n        return props.position === \"topleft\" || props.position === \"top\" || props.position === \"topbottom\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderBottomRightRadius: function borderBottomRightRadius(props) {\n        return props.position === \"bottomright\" || props.position === \"topbottom\" || props.position === \"all\" ? 15 : 0;\n      },\n      borderBottomLeftRadius: function borderBottomLeftRadius(props) {\n        return props.position === \"bottomleft\" || props.position === \"topbottom\" || props.position === \"all\" ? 15 : 0;\n      }\n    }), _defineProperty(_img2, \"position\", 'relative'), _defineProperty(_img2, \"boxSizing\", 'border-box'), _defineProperty(_img2, \"width\", '100%'), _defineProperty(_img2, \"height\", '100%'), _defineProperty(_img2, \"objectFit\", 'cover'), _img2)\n  };\n});\nexport var CnvCloud = function CnvCloud(props) {\n  var classes = useCnvCloudStyles(props);\n\n  var _useContext2 = useContext(AppContext),\n      appstate = _useContext2.appstate,\n      dispatch = _useContext2.dispatch;\n\n  var _useState2 = useState(''),\n      cloudUrl = _useState2[0],\n      setCloudUrl = _useState2[1];\n\n  var homeImagesUrl = props.src; //   console.log('Home images url: '+  homeImagesUrl);\n  //     console.log('Cloud URL ::: '+typeof cloudUrl + '::'+ JSON.stnrigify(cloudUrl));\n\n  useEffect(function () {\n    /*\n     if (homeImagesUrl.constructor.name === 'Promise') {\n        homeImagesUrl\n            .then(url => {\n               // console.log('Then url: ' + url);\n                setCloudUrl(url + '');\n            }).\n            catch(err => {\n                console.log('Error found: ' + err.message);\n                //  setCloudUrl('');\n            })\n    }else{\n     console.log('Then string url: ' + homeImagesUrl);\n        setCloudUrl(homeImagesUrl);\n    } */\n    setCloudUrl(homeImagesUrl);\n  }, [homeImagesUrl]);\n\n  var handleOverLay = function handleOverLay(evt) {\n    dispatch({\n      type: 'OVERLAY',\n      data: true\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: classes.rootcontainer\n  }, __jsx(ImgCloud, {\n    gravity: props.gravity,\n    src: cloudUrl,\n    w: props.w,\n    h: props.h,\n    className: classes.img\n  }), props.overlay ? props.children : \"\");\n};\nexport var _CnvCloud = function _CnvCloud(props) {\n  var classes = useCnvCloudStyles(props);\n\n  var _useContext3 = useContext(AppContext),\n      appstate = _useContext3.appstate,\n      dispatch = _useContext3.dispatch;\n\n  var _useState3 = useState(''),\n      cloudUrl = _useState3[0],\n      setCloudUrl = _useState3[1];\n\n  var homeImagesUrl = props.src; //  console.log('Home images url: '+  homeImagesUrl);\n  //    console.log('Cloud URL ::: '+typeof cloudUrl + '::'+ JSON.stringify(cloudUrl));\n\n  useEffect(function () {\n    homeImagesUrl.then(function (url) {\n      // console.log('Then url: '+url);\n      setCloudUrl(url + '');\n    })[\"catch\"](function (err) {\n      console.log('Error found: ' + err.message); //  setCloudUrl('');\n    });\n  }, [homeImagesUrl]);\n  /*    const [dataUrl, setDataUrl] = useState(null);\n         useEffect(() => {\n         let abortController = new AbortController();\n             clipImage(props.w, props.h, props.src,{signal:abortController.signal})\n             .then(dataurl => setDataUrl(dataurl))\n             .catch(err => console.log(\"Image load error: \" + err.message));\n     \n         return ()=>{\n             abortController.abort();\n         }\n         });\n  */\n\n  var handleOverLay = function handleOverLay(evt) {\n    dispatch({\n      type: 'OVERLAY',\n      data: true\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: classes.rootcontainer\n  }, __jsx(ImgCloud, {\n    src: cloudUrl,\n    className: classes.img\n  }), props.overlay ? props.children : \"\");\n};","map":{"version":3,"sources":["/home/azure/spaces/reactapps/agt_basic/src/app/components/cnvimg/index.js"],"names":["React","useContext","useState","useEffect","makeStyles","AppContext","clipImage","ImgCloud","useCnvStyles","theme","rootcontainer","boxSizing","position","display","flex","flexFlow","width","maxWidth","height","img","breakpoints","up","borderTopRightRadius","props","borderTopLeftRadius","borderBottomRightRadius","borderBottomLeftRadius","Cnv","classes","appstate","dispatch","dataUrl","setDataUrl","abortController","AbortController","w","h","src","signal","then","dataurl","err","console","log","message","abort","handleOverLay","evt","type","data","overlay","children","useCnvCloudStyles","CnvCloud","cloudUrl","setCloudUrl","homeImagesUrl","gravity","_CnvCloud","url"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { Box, Button } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { amber } from '@material-ui/core/colors';\nimport theme from '../../theme';\nimport { AppContext } from '../../state/appcntxt';\nimport HotelOutlinedIcon from '@material-ui/icons/HotelOutlined';\nimport BathtubOutlinedIcon from '@material-ui/icons/BathtubOutlined';\nimport RestaurantMenuOutlinedIcon from '@material-ui/icons/RestaurantMenuOutlined';\nimport DriveEtaIcon from '@material-ui/icons/DriveEta';\nimport { clipImage } from '../../lib/utils';\nimport { ImgCloud } from './components';\n\n\n\nconst useCnvStyles = makeStyles(theme => ({\n\n    rootcontainer: {\n        boxSizing: 'border-box',\n        position: 'relative',\n        display: 'flex',\n        flex: 'auto',\n        flexFlow: 'row wrap',\n        width: '100%',\n        maxWidth: '100%',\n        height: '100%',\n        //  cursor:'pointer',\n        //  padding:20,\n    },\n    img: {\n        [theme.breakpoints.up('xs')]: {\n            borderTopRightRadius: props => (\n                props.position === \"topleft\"\n                || props.position === \"all\") ? 15 : 0,\n            borderTopLeftRadius: props => (\n                props.position === \"topleft\"\n                || props.position === \"all\") ? 15 : 0,\n            borderBottomRightRadius: props => (\n                props.position === \"bottomright\"\n                || props.position === \"all\") ? 15 : 0,\n            borderBottomLeftRadius: props => (\n                props.position === \"bottomright\"\n                || props.position === \"all\") ? 15 : 0,\n\n        },\n        [theme.breakpoints.up('md')]: {\n            borderTopRightRadius: props => (\n                props.position === \"topright\"\n                || props.position === \"top\"\n                || props.position === \"topbottom\"\n                || props.position === \"all\") ? 15 : 0,\n            borderTopLeftRadius: props => (\n                props.position === \"topleft\"\n                || props.position === \"top\"\n                || props.position === \"topbottom\"\n                || props.position === \"all\") ? 15 : 0,\n            borderBottomRightRadius: props => (\n                props.position === \"bottomright\"\n                || props.position === \"topbottom\"\n                || props.position === \"all\") ? 15 : 0,\n            borderBottomLeftRadius: props => (\n                props.position === \"bottomleft\"\n                || props.position === \"topbottom\"\n                || props.position === \"all\") ? 15 : 0,\n\n        },\n        position: 'relative',\n        boxSizing: 'border-box',//\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n\n    },\n\n\n}));\n\nexport const Cnv = (props) => {\n    const classes = useCnvStyles(props);\n    const { appstate, dispatch } = useContext(AppContext);\n\n\n    const [dataUrl, setDataUrl] = useState(null);\n\n    useEffect(() => {\n        let abortController = new AbortController();\n\n        clipImage(props.w, props.h, props.src, { signal: abortController.signal })\n            .then(dataurl => setDataUrl(dataurl))\n            .catch(err => console.log(\"Image load error: \" + err.message));\n\n        return () => {\n            abortController.abort();\n        }\n\n    });\n\n\n    const handleOverLay = evt => {\n        dispatch({ type: 'OVERLAY', data: true })\n    }\n\n    return (\n        <div className={classes.rootcontainer} >\n            <img src={dataUrl} className={classes.img} />\n\n            {\n                props.overlay ? (\n                    props.children\n                )\n                    :\n                    \"\"\n            }\n        </div>\n    )\n\n}\n\n\nconst useCnvCloudStyles = makeStyles(theme => ({\n\n    rootcontainer: {\n        boxSizing: 'border-box',\n        position: 'relative',\n        display: 'flex',\n        flex: 'auto',\n        flexFlow: 'row wrap',\n        width: '100%',\n        maxWidth: '100%',\n        height: '100%',\n        //  cursor:'pointer',\n        //  padding:20,\n    },\n    img: {\n        [theme.breakpoints.up('xs')]: {\n            borderTopRightRadius: props => (\n                props.position === \"topleft\"\n                || props.position === \"all\") ? 15 : 0,\n            borderTopLeftRadius: props => (\n                props.position === \"topleft\"\n                || props.position === \"all\") ? 15 : 0,\n            borderBottomRightRadius: props => (\n                props.position === \"bottomright\"\n                || props.position === \"all\") ? 15 : 0,\n            borderBottomLeftRadius: props => (\n                props.position === \"bottomright\"\n                || props.position === \"all\") ? 15 : 0,\n\n        },\n        [theme.breakpoints.up('md')]: {\n            borderTopRightRadius: props => (\n                props.position === \"topright\"\n                || props.position === \"top\"\n                || props.position === \"topbottom\"\n                || props.position === \"all\") ? 15 : 0,\n            borderTopLeftRadius: props => (\n                props.position === \"topleft\"\n                || props.position === \"top\"\n                || props.position === \"topbottom\"\n                || props.position === \"all\") ? 15 : 0,\n            borderBottomRightRadius: props => (\n                props.position === \"bottomright\"\n                || props.position === \"topbottom\"\n                || props.position === \"all\") ? 15 : 0,\n            borderBottomLeftRadius: props => (\n                props.position === \"bottomleft\"\n                || props.position === \"topbottom\"\n                || props.position === \"all\") ? 15 : 0,\n\n        },\n        position: 'relative',\n        boxSizing: 'border-box',//\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n\n    },\n\n\n}));\n\n\n\nexport const CnvCloud = (props) => {\n    const classes = useCnvCloudStyles(props);\n    const { appstate, dispatch } = useContext(AppContext);\n    const [cloudUrl, setCloudUrl] = useState('');\n    const homeImagesUrl = props.src;\n    //   console.log('Home images url: '+  homeImagesUrl);\n    //     console.log('Cloud URL ::: '+typeof cloudUrl + '::'+ JSON.stnrigify(cloudUrl));\n\n    useEffect(() => {\n        /*\n         if (homeImagesUrl.constructor.name === 'Promise') {\n            homeImagesUrl\n                .then(url => {\n                   // console.log('Then url: ' + url);\n                    setCloudUrl(url + '');\n                }).\n                catch(err => {\n                    console.log('Error found: ' + err.message);\n                    //  setCloudUrl('');\n                })\n        }else{\n         console.log('Then string url: ' + homeImagesUrl);\n            setCloudUrl(homeImagesUrl);\n        } */\n\n        setCloudUrl(homeImagesUrl);\n\n\n    }, [homeImagesUrl]);\n\n\n    const handleOverLay = evt => {\n        dispatch({ type: 'OVERLAY', data: true })\n    }\n\n    return (\n        <div className={classes.rootcontainer} >\n            {/* <img src={dataUrl} className={classes.img} /> */}\n            <ImgCloud gravity={props.gravity} src={cloudUrl} w={props.w} h={props.h} className={classes.img} />\n            {\n                props.overlay ? (\n                    props.children\n                )\n                    :\n                    \"\"\n            }\n        </div>\n    )\n\n}\n\n\n\nexport const _CnvCloud = (props) => {\n    const classes = useCnvCloudStyles(props);\n    const { appstate, dispatch } = useContext(AppContext);\n    const [cloudUrl, setCloudUrl] = useState('');\n    const homeImagesUrl = props.src;\n    //  console.log('Home images url: '+  homeImagesUrl);\n    //    console.log('Cloud URL ::: '+typeof cloudUrl + '::'+ JSON.stringify(cloudUrl));\n\n    useEffect(() => {\n        homeImagesUrl\n            .then(url => {\n                // console.log('Then url: '+url);\n                setCloudUrl(url + '');\n            }).\n            catch(err => {\n                console.log('Error found: ' + err.message);\n                //  setCloudUrl('');\n            })\n\n    }, [homeImagesUrl]);\n\n\n    /*    const [dataUrl, setDataUrl] = useState(null);\n   \n       useEffect(() => {\n           let abortController = new AbortController();\n   \n           clipImage(props.w, props.h, props.src,{signal:abortController.signal})\n               .then(dataurl => setDataUrl(dataurl))\n               .catch(err => console.log(\"Image load error: \" + err.message));\n       \n           return ()=>{\n               abortController.abort();\n           }\n   \n       });\n    */\n\n    const handleOverLay = evt => {\n        dispatch({ type: 'OVERLAY', data: true })\n    }\n\n    return (\n        <div className={classes.rootcontainer} >\n            {/* <img src={dataUrl} className={classes.img} /> */}\n            <ImgCloud src={cloudUrl} className={classes.img} />\n            {\n                props.overlay ? (\n                    props.children\n                )\n                    :\n                    \"\"\n            }\n        </div>\n    )\n\n}\n"]},"metadata":{},"sourceType":"module"}