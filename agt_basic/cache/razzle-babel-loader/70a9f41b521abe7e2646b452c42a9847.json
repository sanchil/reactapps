{"ast":null,"code":"import CONST from '../../consts';\nexport const amzSignIn = () => {\n  const options = {};\n  options.popup = false;\n  options.scope = 'profile';\n  options.scope_data = {\n    'profile': {\n      'essential': false\n    }\n  };\n  options.response_type = 'code'; // console.log('amazon redirect uri is: '+CONST.AMZREDIRECT_URI);\n\n  amazon.Login.authorize(options, CONST.AMZREDIRECT_URI);\n  return false;\n};\nexport const getAmzUser = () => {\n  // const uri = CONST.FB_USER_EP;\n  //const uri = 'https://api.amazon.com/user/profile';\n  const uri = CONST.AMZ_USER_EP;\n  console.log('Amazon : uri : ' + uri);\n  const url = new URL(uri);\n\n  if (localStorage.getItem('amzToken')) {\n    const amzAccessToken = JSON.parse(localStorage.getItem('amzToken'));\n    console.log('Amazon: ACCESS TOKEN: ' + JSON.stringify(amzAccessToken));\n\n    if (amzAccessToken.access_token) {\n      /*    url.search = new URLSearchParams({\n           //fields: 'id,name,birthday,email',    \n          // access_token: 'EAAIojKWrSbABAIpoo85H2ZCKFmvDvsrf2ZCfYDQofHPUbzc8oKZAkGdZA2oEq6j22ZASCNIfqWHPsP9qQU4sYPRZCjbY01sThsQM3yI4lOQAryXKdNfsLZCWGnCBdMRe2lIiDHxaEaTZC0Eib12tht8dVA6QqOa5oI01XRDgsc0FqinGzYanJom2',\n           access_token: amzAccessToken.access_token,\n         }); */\n      const headers = new Headers({\n        //'Authorization': 'Bearer ' + params['access_token'],\n        'Authorization': 'Bearer ' + amzAccessToken.access_token,\n        //    'Authorization': 'Bearer ' + 'ya29.Il_ABz1maps1ttHy1f9YlRj6FMfkvlEr1T0qa062Z1976NhfWJPoLPL9SljDL1xCj1RDJBIrkxsOXNfChkbiyoEZHHOWEjNq1TEELIpcqlF02K6wYTUdQ9gviuRQWjroQw',\n        'Accept': 'application/json',\n        'Content-Type': 'application/json' //  'Content-length':0\n\n      });\n      const reqOpts = {\n        method: 'GET',\n        headers: headers\n      };\n      const req = new Request(url, reqOpts);\n      return fetch(req).then(res => {\n        //console.log('Res connected: ' + res.ok + res.connected);\n        return res.json();\n      });\n    }\n  } else {\n    return {};\n  }\n};","map":{"version":3,"sources":["/home/azure/spaces/reactapps/agt_basic/src/app/data/auth/amzauth.js"],"names":["CONST","amzSignIn","options","popup","scope","scope_data","response_type","amazon","Login","authorize","AMZREDIRECT_URI","getAmzUser","uri","AMZ_USER_EP","console","log","url","URL","localStorage","getItem","amzAccessToken","JSON","parse","stringify","access_token","headers","Headers","reqOpts","method","req","Request","fetch","then","res","json"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,cAAlB;AAEA,OAAO,MAAMC,SAAS,GAAG,MAAM;AAC7B,QAAMC,OAAO,GAAG,EAAhB;AACAA,EAAAA,OAAO,CAACC,KAAR,GAAgB,KAAhB;AACAD,EAAAA,OAAO,CAACE,KAAR,GAAgB,SAAhB;AACAF,EAAAA,OAAO,CAACG,UAAR,GAAqB;AACnB,eAAW;AAAE,mBAAa;AAAf;AADQ,GAArB;AAGAH,EAAAA,OAAO,CAACI,aAAR,GAAwB,MAAxB,CAP6B,CAS7B;;AAEAC,EAAAA,MAAM,CAACC,KAAP,CAAaC,SAAb,CAAuBP,OAAvB,EAAgCF,KAAK,CAACU,eAAtC;AAEA,SAAO,KAAP;AACD,CAdM;AAiBP,OAAO,MAAMC,UAAU,GAAG,MAAM;AAC9B;AACA;AACA,QAAMC,GAAG,GAAGZ,KAAK,CAACa,WAAlB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAoBH,GAAhC;AACA,QAAMI,GAAG,GAAG,IAAIC,GAAJ,CAAQL,GAAR,CAAZ;;AAIA,MAAIM,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAJ,EAAsC;AACpC,UAAMC,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAvB;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAA2BM,IAAI,CAACE,SAAL,CAAeH,cAAf,CAAvC;;AAEA,QAAIA,cAAc,CAACI,YAAnB,EAAiC;AAE/B;AACN;AACA;AACA;AACA;AAEM,YAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAY;AAC1B;AACA,yBAAiB,YAAYN,cAAc,CAACI,YAFlB;AAG1B;AACA,kBAAU,kBAJgB;AAK1B,wBAAgB,kBALU,CAM1B;;AAN0B,OAAZ,CAAhB;AAQA,YAAMG,OAAO,GAAG;AACdC,QAAAA,MAAM,EAAE,KADM;AAEdH,QAAAA,OAAO,EAAEA;AAFK,OAAhB;AAKA,YAAMI,GAAG,GAAG,IAAIC,OAAJ,CAAYd,GAAZ,EAAiBW,OAAjB,CAAZ;AAEA,aAAOI,KAAK,CAACF,GAAD,CAAL,CACJG,IADI,CACCC,GAAG,IAAI;AACX;AACA,eAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,OAJI,CAAP;AAMD;AAEF,GAnCD,MAmCO;AACL,WAAO,EAAP;AACD;AAMF,CApDM","sourcesContent":["import CONST from '../../consts';\n\nexport const amzSignIn = () => {\n  const options = {}\n  options.popup = false;\n  options.scope = 'profile';\n  options.scope_data = {\n    'profile': { 'essential': false }\n  };\n  options.response_type = 'code';\n\n  // console.log('amazon redirect uri is: '+CONST.AMZREDIRECT_URI);\n\n  amazon.Login.authorize(options, CONST.AMZREDIRECT_URI);\n\n  return false;\n}\n\n\nexport const getAmzUser = () => {\n  // const uri = CONST.FB_USER_EP;\n  //const uri = 'https://api.amazon.com/user/profile';\n  const uri = CONST.AMZ_USER_EP;\n  console.log('Amazon : uri : ' + uri);\n  const url = new URL(uri);\n\n\n\n  if (localStorage.getItem('amzToken')) {\n    const amzAccessToken = JSON.parse(localStorage.getItem('amzToken'));\n    console.log('Amazon: ACCESS TOKEN: ' + JSON.stringify(amzAccessToken));\n\n    if (amzAccessToken.access_token) {\n\n      /*    url.search = new URLSearchParams({\n           //fields: 'id,name,birthday,email',    \n          // access_token: 'EAAIojKWrSbABAIpoo85H2ZCKFmvDvsrf2ZCfYDQofHPUbzc8oKZAkGdZA2oEq6j22ZASCNIfqWHPsP9qQU4sYPRZCjbY01sThsQM3yI4lOQAryXKdNfsLZCWGnCBdMRe2lIiDHxaEaTZC0Eib12tht8dVA6QqOa5oI01XRDgsc0FqinGzYanJom2',\n           access_token: amzAccessToken.access_token,\n         }); */\n\n      const headers = new Headers({\n        //'Authorization': 'Bearer ' + params['access_token'],\n        'Authorization': 'Bearer ' + amzAccessToken.access_token,\n        //    'Authorization': 'Bearer ' + 'ya29.Il_ABz1maps1ttHy1f9YlRj6FMfkvlEr1T0qa062Z1976NhfWJPoLPL9SljDL1xCj1RDJBIrkxsOXNfChkbiyoEZHHOWEjNq1TEELIpcqlF02K6wYTUdQ9gviuRQWjroQw',\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        //  'Content-length':0\n      });\n      const reqOpts = {\n        method: 'GET',\n        headers: headers,\n      };\n\n      const req = new Request(url, reqOpts);\n\n      return fetch(req)\n        .then(res => {\n          //console.log('Res connected: ' + res.ok + res.connected);\n          return res.json();\n        });\n\n    }\n\n  } else {\n    return {}\n  }\n\n\n\n\n\n}"]},"metadata":{},"sourceType":"module"}