{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Box from '@material-ui/core/Box';\nimport { connect } from 'react-redux';\nimport IconButton from '@material-ui/core/IconButton';\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger';\nimport { Button } from '@material-ui/core';\nimport { AppContext } from '../../state/appcntxt';\nimport Fade from '@material-ui/core/Fade';\nimport { amber, cyan } from '@material-ui/core/colors';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport HomeRoundedIcon from '@material-ui/icons/HomeRounded';\nimport TuneRoundedIcon from '@material-ui/icons/TuneRounded';\nimport InfoRoundedIcon from '@material-ui/icons/InfoRounded';\nimport ContactMailRoundedIcon from '@material-ui/icons/ContactMailRounded';\nimport { LoginIcon, LoginMenu } from './components';\nimport { TypoHdBaskerville } from '../styles/styledcomponents';\nimport _ from 'lodash';\nimport { useScreen } from '../../lib/userhooks';\n\nconst mapStateToProps = state => ({\n  carview: state.carview\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    caropen: val => dispatch({\n      type: 'CARVIEW',\n      data: val\n    })\n  };\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: trigger => trigger ? 0 : 50,\n    transition: 'height 0.8s ease-in-out'\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  menu: {\n    [theme.breakpoints.up('xs')]: {\n      width: '80%'\n    },\n    [theme.breakpoints.up('sm')]: {\n      width: '50%'\n    },\n    display: 'flex',\n    flexFlow: 'row wrap',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    width: '30%',\n    padding: 5 //   border: '3px red solid',\n\n  },\n  messagebar: {\n    fontFamily: '\"Baskervville\", serif',\n    fontWeight: 500,\n    fontSize: '2vw',\n    letterSpacing: '2px',\n    color: amber[100],\n    margin: 'auto'\n  }\n}));\nconst styles = {\n  appbar: {\n    button: {\n      color: cyan[50],\n      fontWeight: 500\n    }\n  }\n};\n\nconst DenseAppBar = props => {\n  // console.log(\"Calling dense bar\");\n  const {\n    0: anchorEl,\n    1: setAnchorEl\n  } = useState(null);\n  const {\n    appstate,\n    dispatch\n  } = useContext(AppContext);\n  const {\n    0: login,\n    1: setLogin\n  } = useState(false);\n  const {\n    0: name,\n    1: setName\n  } = useState(\"\");\n  const history = useHistory();\n  const location = useLocation(); //console.log('User: ' + JSON.stringify(appstate.user.uid));\n  //console.log('User: ' + name);\n\n  useEffect(() => {\n    /** change following logic to pick session info from stored redis session */\n    if (appstate.user.login && appstate.user.source === 'google') {\n      // console.log('appbar :: set name google: ' + appstate.user.uid.name + \"::\" + _.isEmpty(appstate.user.uid.name));\n      console.log('appbar :: set name google: ' + JSON.stringify(appstate.user.uid));\n      setName(appstate.user.uid.name);\n    } else if (appstate.user.login && appstate.user.source === 'facebook') {\n      console.log('set name facebook: ' + appstate.user.uid.name + \"::\" + _.isEmpty(appstate.user.uid.name));\n      setName(appstate.user.uid.name);\n    } else if (appstate.user.login && appstate.user.source === 'amazon') {\n      console.log('set name amazon: ' + appstate.user.uid.name + \"::\" + _.isEmpty(appstate.user.uid.name));\n      setName(appstate.user.uid.name);\n    } else if (appstate.user.login && appstate.user.source === 'twitter') {\n      console.log('set name twitter: ' + appstate.user.uid.screen_name + \"::\" + _.isEmpty(appstate.user.uid.screen_name));\n      setName(appstate.user.uid.screen_name);\n    } else if (appstate.user.uid.fname) {\n      setName(appstate.user.uid.fname + ' ' + appstate.user.uid.lname);\n    } else {\n      setName(\".^.\");\n    }\n  }, [appstate.user.login]); //console.log('Location is : ' + JSON.stringify(location));\n  //console.log('Location hash substring : ' + JSON.stringify(location.hash.substring(1)));\n\n  const handlePage = inp => e => {\n    history.push(`/${inp}`);\n  };\n\n  const handleLogin = inp => e => {\n    if (appstate.user.login) {\n      setAnchorEl(e.currentTarget);\n    } else {\n      history.push(`/${inp}`);\n    }\n  };\n\n  const trigger = useScrollTrigger();\n  const classes = useStyles(trigger);\n  return __jsx(Fade, {\n    in: !trigger\n  }, __jsx(AppBar, {\n    position: \"fixed\",\n    className: classes.root\n  }, __jsx(Toolbar, {\n    variant: \"dense\",\n    className: classes.toolbar\n  }, __jsx(IconButton, {\n    onClick: handlePage(''),\n    edge: \"start\",\n    className: classes.menuButton,\n    color: \"inherit\",\n    \"aria-label\": \"menu\"\n  }, __jsx(HomeRoundedIcon, null)), __jsx(TypoHdBaskerville, {\n    width: \"40%\",\n    color: amber[200],\n    fsize: 2\n  }, \"Welcome \", name, \" !!\"), __jsx(Box, {\n    className: classes.menu\n  }, __jsx(Button, {\n    onClick: handlePage('tools'),\n    style: styles.appbar.button\n  }, \"Tools\"), __jsx(Button, {\n    onClick: handlePage('about'),\n    style: styles.appbar.button\n  }, \"About Me\"), __jsx(Button, {\n    onClick: handlePage('contact'),\n    style: styles.appbar.button\n  }, \"Contact\"), __jsx(IconButton, {\n    onClick: handleLogin('login'),\n    edge: \"end\",\n    className: classes.menuButton,\n    color: \"inherit\",\n    \"aria-label\": \"menu\"\n  }, __jsx(LoginIcon, {\n    login: appstate.user.login,\n    setLogin: setLogin\n  })), __jsx(LoginMenu, {\n    anchorEl: anchorEl,\n    setAnchorEl: setAnchorEl,\n    setLogin: setLogin\n  })))));\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DenseAppBar);\nconst useMobileStyles = makeStyles({\n  root: {\n    width: '100%',\n    position: 'fixed',\n    top: screen => screen.height - 55,\n    backgroundColor: cyan[300],\n    zIndex: 20\n  }\n});\nexport const MobileBar = props => {\n  const [value, setValue] = React.useState('');\n  const screen = useScreen();\n  const classes = useMobileStyles(screen);\n  const history = useHistory();\n  const {\n    0: anchorEl,\n    1: setAnchorEl\n  } = useState(null);\n  const {\n    0: login,\n    1: setLogin\n  } = useState(false); //console.log(\"Screen width: \"+ screen.width + \"Screen height\" + screen.height);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n    history.push(`/${newValue}`);\n  };\n\n  return __jsx(BottomNavigation, {\n    value: value,\n    onChange: handleChange,\n    className: classes.root\n  }, __jsx(BottomNavigationAction, {\n    label: \"Home\",\n    value: \"\",\n    icon: __jsx(HomeRoundedIcon, null)\n  }), __jsx(BottomNavigationAction, {\n    label: \"Tools\",\n    value: \"tools\",\n    icon: __jsx(TuneRoundedIcon, null)\n  }), __jsx(BottomNavigationAction, {\n    label: \"About\",\n    value: \"about\",\n    icon: __jsx(InfoRoundedIcon, null)\n  }), __jsx(BottomNavigationAction, {\n    label: \"Contact\",\n    value: \"contact\",\n    icon: __jsx(ContactMailRoundedIcon, null)\n  }), __jsx(BottomNavigationAction, {\n    label: \"Login\",\n    value: \"login\",\n    icon: __jsx(LoginIcon, {\n      anchorEl: anchorEl,\n      setAnchorEl: setAnchorEl,\n      setLogin: setLogin\n    })\n  }));\n};\n/* const useLoginIconStyles = makeStyles(theme => ({\n  root: {\n\n  }\n}));\n\nconst LoginIcon = (props) => {\n  const classes = useLoginIconStyles();\n\n  const {appstate,dispatch} =  useContext(AppContext);\n  const [login,setLogin] = useState(false);\n  const { pathname } = useLocation();\n\n\n\n  console.log(\"App state user: \"+ JSON.stringify(appstate.user));\n\n  useEffect(() => {\n\n    getSession()\n    .then(doc=>{\n      setLogin(doc.login);\n    });\n    setLogin(appstate.user.login);\n}, [pathname]);\n\n\n  if (login) {\n    return (\n      <React.Fragment>\n        <PersonRoundedIcon />\n      </React.Fragment>\n    )\n  } else {\n    return (\n      <React.Fragment>\n        <LockRoundedIcon />\n      </React.Fragment>\n    )\n\n  }\n\n\n} */","map":{"version":3,"sources":["/home/azure/spaces/reactapps/agt_basic/src/app/components/appbar/index.js"],"names":["React","useContext","useState","useEffect","useHistory","useLocation","makeStyles","AppBar","Toolbar","Box","connect","IconButton","useScrollTrigger","Button","AppContext","Fade","amber","cyan","BottomNavigation","BottomNavigationAction","HomeRoundedIcon","TuneRoundedIcon","InfoRoundedIcon","ContactMailRoundedIcon","LoginIcon","LoginMenu","TypoHdBaskerville","_","useScreen","mapStateToProps","state","carview","mapDispatchToProps","dispatch","caropen","val","type","data","useStyles","theme","root","flexGrow","height","trigger","transition","toolbar","display","justifyContent","menuButton","marginRight","spacing","menu","breakpoints","up","width","flexFlow","alignItems","padding","messagebar","fontFamily","fontWeight","fontSize","letterSpacing","color","margin","styles","appbar","button","DenseAppBar","props","anchorEl","setAnchorEl","appstate","login","setLogin","name","setName","history","location","user","source","console","log","JSON","stringify","uid","isEmpty","screen_name","fname","lname","handlePage","inp","e","push","handleLogin","currentTarget","classes","useMobileStyles","position","top","screen","backgroundColor","zIndex","MobileBar","value","setValue","handleChange","event","newValue"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\n\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Box from '@material-ui/core/Box';\nimport { connect } from 'react-redux';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger';\nimport { Button } from '@material-ui/core';\nimport { AppContext } from '../../state/appcntxt';\nimport Fade from '@material-ui/core/Fade';\nimport { yellow, amber, blue, lightBlue, cyan } from '@material-ui/core/colors';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport HomeRoundedIcon from '@material-ui/icons/HomeRounded';\nimport TuneRoundedIcon from '@material-ui/icons/TuneRounded';\nimport InfoRoundedIcon from '@material-ui/icons/InfoRounded';\nimport ContactMailRoundedIcon from '@material-ui/icons/ContactMailRounded';\nimport LockRoundedIcon from '@material-ui/icons/LockRounded';\nimport PersonRoundedIcon from '@material-ui/icons/PersonRounded';\nimport { getSession } from '../../data/session/sessionquery';\nimport { LoginIcon, LoginMenu, SimpleMenu } from './components';\nimport { TypoHdBaskerville } from '../styles/styledcomponents';\n\nimport _ from 'lodash';\nimport { useScreen } from '../../lib/userhooks';\n\n\nconst mapStateToProps = state => ({\n  carview: state.carview\n});\n\nconst mapDispatchToProps = dispatch => {\n  return ({\n    caropen: (val) => dispatch({ type: 'CARVIEW', data: val })\n  });\n};\n\nconst useStyles = makeStyles(theme => ({\n\n  root: {\n    flexGrow: 1,\n    height: trigger => trigger ? 0 : 50,\n    transition: 'height 0.8s ease-in-out',\n\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-between',\n\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n\n  },\n  menu: {\n    [theme.breakpoints.up('xs')]: {\n      width: '80%',\n    },\n    [theme.breakpoints.up('sm')]: {\n      width: '50%',\n    },\n\n    display: 'flex',\n    flexFlow: 'row wrap',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    width: '30%',\n    padding: 5,\n    //   border: '3px red solid',\n\n  },\n  messagebar: {\n    fontFamily: '\"Baskervville\", serif',\n    fontWeight: 500,\n    fontSize: '2vw',\n    letterSpacing: '2px',\n    color: amber[100],\n    margin: 'auto',\n  }\n\n\n\n\n}));\n\n\nconst styles = {\n  appbar: {\n    button: {\n      color: cyan[50],\n      fontWeight: 500\n    }\n  }\n}\n\n\n\nconst DenseAppBar = (props) => {\n  // console.log(\"Calling dense bar\");\n  const [anchorEl, setAnchorEl] = useState(null);\n  const { appstate, dispatch } = useContext(AppContext);\n  const [login, setLogin] = useState(false);\n  const [name, setName] = useState(\"\");\n\n\n\n  const history = useHistory();\n  const location = useLocation();\n\n  //console.log('User: ' + JSON.stringify(appstate.user.uid));\n\n  //console.log('User: ' + name);\n\n\n\n\n  useEffect(() => {\n    \n    /** change following logic to pick session info from stored redis session */\n\n    if (appstate.user.login && appstate.user.source === 'google') {\n\n     // console.log('appbar :: set name google: ' + appstate.user.uid.name + \"::\" + _.isEmpty(appstate.user.uid.name));\n      console.log('appbar :: set name google: ' + JSON.stringify(appstate.user.uid));\n      setName(appstate.user.uid.name);\n\n    } else if (appstate.user.login && appstate.user.source === 'facebook') {\n      \n      console.log('set name facebook: ' + appstate.user.uid.name + \"::\" + _.isEmpty(appstate.user.uid.name));\n      setName(appstate.user.uid.name);\n\n    }else if (appstate.user.login && appstate.user.source === 'amazon') {\n      \n      console.log('set name amazon: ' + appstate.user.uid.name + \"::\" + _.isEmpty(appstate.user.uid.name));\n      setName(appstate.user.uid.name);\n\n    }else if (appstate.user.login && appstate.user.source === 'twitter') {\n      \n      console.log('set name twitter: ' + appstate.user.uid.screen_name + \"::\" + _.isEmpty(appstate.user.uid.screen_name));\n      setName(appstate.user.uid.screen_name);\n\n    } else if (appstate.user.uid.fname) {\n      setName(appstate.user.uid.fname + ' ' + appstate.user.uid.lname);\n    } else {\n      setName(\".^.\");\n    }\n\n  }, [appstate.user.login]);\n\n  //console.log('Location is : ' + JSON.stringify(location));\n  //console.log('Location hash substring : ' + JSON.stringify(location.hash.substring(1)));\n\n  const handlePage = (inp) => (e) => {\n    history.push(`/${inp}`);\n  }\n\n  const handleLogin = (inp) => e => {\n    if (appstate.user.login) {\n      setAnchorEl(e.currentTarget);\n    } else {\n      history.push(`/${inp}`);\n    }\n\n  }\n\n  const trigger = useScrollTrigger();\n  const classes = useStyles(trigger);\n\n\n  return (\n    <Fade in={!trigger}>\n      <AppBar position=\"fixed\" className={classes.root}>\n\n        <Toolbar variant=\"dense\" className={classes.toolbar}>\n\n          <IconButton onClick={handlePage('')} edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\n            <HomeRoundedIcon />\n          </IconButton>\n\n          <TypoHdBaskerville width='40%' color={amber[200]} fsize={2} >\n            Welcome {name} !!\n          </TypoHdBaskerville>\n\n          <Box className={classes.menu}>\n            <Button onClick={handlePage('tools')} style={styles.appbar.button}>\n              Tools\n            </Button>\n            <Button onClick={handlePage('about')} style={styles.appbar.button}>\n              About Me\n            </Button>\n            <Button onClick={handlePage('contact')} style={styles.appbar.button}>\n              Contact\n            </Button>\n\n            <IconButton onClick={handleLogin('login')} edge=\"end\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" >\n              <LoginIcon login={appstate.user.login} setLogin={setLogin} />\n            </IconButton>\n            <LoginMenu anchorEl={anchorEl} setAnchorEl={setAnchorEl} setLogin={setLogin} />\n\n          </Box>\n        </Toolbar>\n      </AppBar>\n    </Fade>\n\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DenseAppBar);\n\n\n\n\nconst useMobileStyles = makeStyles({\n  root: {\n    width: '100%',\n    position: 'fixed',\n    top: screen => screen.height - 55,\n    backgroundColor: cyan[300],\n    zIndex: 20,\n  },\n});\n\nexport const MobileBar = (props) => {\n\n  const [value, setValue] = React.useState('');\n  const screen = useScreen();\n  const classes = useMobileStyles(screen);\n  const history = useHistory();\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [login, setLogin] = useState(false);\n\n  //console.log(\"Screen width: \"+ screen.width + \"Screen height\" + screen.height);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n    history.push(`/${newValue}`);\n  };\n\n  return (\n    <BottomNavigation value={value} onChange={handleChange} className={classes.root}>\n      <BottomNavigationAction label=\"Home\" value=\"\" icon={<HomeRoundedIcon />} />\n      <BottomNavigationAction label=\"Tools\" value=\"tools\" icon={<TuneRoundedIcon />} />\n      <BottomNavigationAction label=\"About\" value=\"about\" icon={<InfoRoundedIcon />} />\n      <BottomNavigationAction label=\"Contact\" value=\"contact\" icon={<ContactMailRoundedIcon />} />\n      <BottomNavigationAction label=\"Login\" value=\"login\" icon={<LoginIcon anchorEl={anchorEl} setAnchorEl={setAnchorEl} setLogin={setLogin} />} />\n\n    </BottomNavigation>\n  );\n}\n\n/* const useLoginIconStyles = makeStyles(theme => ({\n  root: {\n\n  }\n}));\n\nconst LoginIcon = (props) => {\n  const classes = useLoginIconStyles();\n\n  const {appstate,dispatch} =  useContext(AppContext);\n  const [login,setLogin] = useState(false);\n  const { pathname } = useLocation();\n\n\n\n  console.log(\"App state user: \"+ JSON.stringify(appstate.user));\n\n  useEffect(() => {\n\n    getSession()\n    .then(doc=>{\n      setLogin(doc.login);\n    });\n    setLogin(appstate.user.login);\n}, [pathname]);\n\n\n  if (login) {\n    return (\n      <React.Fragment>\n        <PersonRoundedIcon />\n      </React.Fragment>\n    )\n  } else {\n    return (\n      <React.Fragment>\n        <LockRoundedIcon />\n      </React.Fragment>\n    )\n\n  }\n\n\n} */"]},"metadata":{},"sourceType":"module"}