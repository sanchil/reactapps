{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport HomeGrid from '../../components/grids/homegrid';\nimport { Banner } from '../../components/banner';\nimport { CenterPanel } from '../../components/centerpanel';\nimport { Box, Paper, Typography, Button } from '@material-ui/core';\n//import { useSpring, animated, config } from 'react-spring';\nimport * as astyles from '../../components/styles';\nimport { useMediaProp } from '../../lib/userhooks';\nimport { TypoHdMerriweather } from '../../components/styles/styledcomponents';\nimport { useAppContext } from '../../lib/userhooks';\nimport { getEmailUserSvr } from '../../data/auth/googleauth';\nimport { getFBUser } from '../../data/auth/fbauth';\nimport { processAccessToken } from '../../lib/utils';\nimport qry from '../../data/db/queries';\nimport dbObj from '../../data/db/dbobj';\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  bannerpanel: {\n    boxSizing: 'border-box',\n    flexGrow: 1\n  },\n  centerpanel: {\n    boxSizing: 'border-box',\n    display: 'flex',\n    flex: 'auto'\n  },\n  centerpanelbox: {\n    boxSizing: 'border-box',\n    display: 'flex',\n    flex: 'auto',\n    flexFlow: 'row wrap',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    width: '30%',\n    maxWidth: '30%',\n    height: '80%',\n    margin: 'auto',\n    boxShadow: '0px 0px 25px rgba(200,200,200,0.5)',\n    borderRadius: 3,\n    backgroundColor: 'rgb(255,255,255)'\n  },\n  centerpanelboxtop: {\n    boxSizing: 'border-box',\n    display: 'flex',\n    flex: 'auto',\n    flexFlow: 'row wrap',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    width: '90%',\n    maxWidth: '90%',\n    height: '40%',\n    margin: 'auto',\n    borderBottom: \"1px solid rgb(200,200,200)\"\n  },\n  centerpanelboxbottom: {\n    boxSizing: 'border-box',\n    display: 'flex',\n    flex: 'auto',\n    flexFlow: 'row wrap',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    width: '90%',\n    maxWidth: '90%',\n    height: '60%',\n    margin: 'auto'\n  },\n  panel: astyles.panel(theme),\n  panel1: astyles.panel1(theme),\n  bannerimg: {\n    width: '100%',\n    height: 'auto'\n  }\n}));\n\nconst Home = props => {\n  const classes = useStyles(); //const p = useSpring({ to: { opacity: 1.0 }, from: { opacity: 0.0 }, config: { duration: 3000 } });\n\n  const history = useHistory();\n  const {\n    appstate,\n    dispatch\n  } = useAppContext(); // console.log('User: ' + JSON.stringify(appstate.user));\n\n  const location = useLocation(); // console.log('HOME Location: ' + JSON.stringify(location));\n  // const socket = io();\n  // socket.emit('ok',' a new messate');\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [location.pathname]);\n  useEffect(() => {\n    const dt = new Date();\n\n    if (location.pathname === '/gauth' // && location.hash \n    // && (typeof location.hash !== 'undefined')\n    //&& location.hash !== \"\"\n    ) {\n        let abortController = new AbortController();\n        const gUser = dbObj.userObj;\n        gUser.type = 'USER';\n        gUser.social['source'] = 'google';\n        gUser.dataorigin = 'social';\n        gUser.dataflow = 'ADDUSER';\n        gUser.subtype = 'GOOGLE';\n        gUser.status = 'active'; // gUser.date = getFormattedDate(dt, '/');\n        // gUser.time = getFormattedTime(dt, ':');\n\n        gUser.social['idtoken'] = agtSessData.id_token;\n        gUser.social['accesstoken'] = agtSessData.access_token;\n        gUser.social['refreshtoken'] = agtSessData.refresh_token;\n        gUser.social['tokenexpirydate'] = agtSessData.expiry_date;\n        processAccessToken(location, 'googleToken', agtSessData);\n\n        if (agtSessData['access_token']) {\n          getEmailUserSvr(agtSessData['access_token']).then(res => {\n            console.log(\"G user: \" + JSON.stringify(res));\n            gUser.fname = res.given_name;\n            gUser.lname = res.family_name;\n            gUser.socialid = res.id;\n            gUser.social['id'] = res.id;\n            gUser.social['socialemail'] = res.email;\n            gUser.email = res.email; // console.log('Google mapped G User: '+ JSON.stringify(gUser));\n            // qry.createSession('google',res, dispatch);\n\n            qry.addUpdateData('types/users', 'social.id', gUser, {\n              signal: abortController.signal\n            }).then(updateres => {\n              console.log(\"Guser has been updated: \" + JSON.stringify(updateres));\n              qry.createSession('google', res, dispatch);\n            });\n          }).catch(err => {\n            console.log(\"Google Auth Error: \" + JSON.stringify(err));\n          });\n        }\n      }\n\n    if (location.pathname === '/fbauth' && location.hash && typeof location.hash !== 'undefined' && location.hash !== \"\") {\n      console.log('Calling save fb code');\n      let abortController = new AbortController();\n      const gUser = dbObj.userObj;\n      gUser.type = 'USER';\n      gUser.social['source'] = 'facebook';\n      gUser.dataorigin = 'social';\n      gUser.dataflow = 'ADDUSER';\n      gUser.subtype = 'FACEBOOK';\n      gUser.status = 'active'; //   gUser.date = getFormattedDate(dt, '/');\n      //   gUser.time = getFormattedTime(dt, ':');\n      //  gUser.social['idtoken'] = agtSessData.id_token;\n      //  gUser.social['refreshtoken'] = agtSessData.refresh_token;\n\n      processAccessToken(location, 'fbToken');\n      let fbToken = localStorage.getItem('fbToken');\n\n      if (fbToken) {\n        fbToken = JSON.parse(fbToken);\n        gUser.social['accesstoken'] = fbToken.access_token;\n        gUser.social['tokenexpirydate'] = fbToken.data_access_expiration_time;\n      } // console.log(\"FB token: : \"+ fbToken);\n\n\n      const regex = /(.*)(\\s+)(.*)/g;\n      getFBUser().then(res => {\n        //console.log('FB User: '+JSON.stringify(res));\n        let n = regex.exec(res.name); //console.log('Name : '+n[1]);\n\n        if (n && n.length > 2) {\n          gUser.fname = n[1];\n          gUser.lname = n[3];\n        } else {\n          gUser.name = res.name;\n        }\n\n        gUser.socialid = res.id;\n        gUser.social['id'] = res.id;\n        gUser.social['socialemail'] = res.email;\n        gUser.email = res.email; //  console.log('Guser for FB: '+ JSON.stringify(gUser));\n\n        qry.addUpdateData('types/users', 'social.id', gUser, {\n          signal: abortController.signal\n        }).then(updateres => {\n          console.log(\"FBuser has been updated: \" + JSON.stringify(updateres));\n          qry.createSession('facebook', res, dispatch);\n        });\n      });\n    } //    console.log('Call FB to process the token after:: '+ localStorage.getItem('fb_code'));\n\n\n    if (location.pathname === '/amzauth') {\n      let abortController = new AbortController();\n      const regex = /(.*)(\\s+)(.*)/g;\n      const gUser = dbObj.userObj;\n      gUser.type = 'USER';\n      gUser.social['source'] = 'amazon';\n      gUser.dataorigin = 'social';\n      gUser.dataflow = 'ADDUSER';\n      gUser.subtype = 'AMAZON';\n      gUser.status = 'active'; // gUser.date = getFormattedDate(dt, '/');\n      // gUser.time = getFormattedTime(dt, ':');\n\n      gUser.socialid = agtSessData.amzuser.user_id;\n      gUser.social['id'] = agtSessData.amzuser.user_id;\n      gUser.social['socialemail'] = agtSessData.amzuser.email;\n      gUser.email = agtSessData.amzuser.email;\n      gUser.social['accesstoken'] = agtSessData.access_token.access_token;\n      gUser.social['refreshtoken'] = agtSessData.access_token.refresh_token;\n      gUser.social['tokenexpirydate'] = agtSessData.access_token.expires_in;\n      gUser.social['token'] = agtSessData.access_token;\n      gUser.social['user'] = agtSessData.amzuser;\n      let n = regex.exec(agtSessData.amzuser.name);\n\n      if (n && n.length > 2) {\n        gUser.fname = n[1];\n        gUser.lname = n[3];\n      } else {\n        gUser.name = n[0];\n      } //    console.log(\"Amazon sess data: \"+ JSON.stringify(gUser));\n      //  qry.createSession('amazon', agtSessData.amzuser, dispatch);\n\n\n      qry.addUpdateData('types/users', 'social.id', gUser, {\n        signal: abortController.signal\n      }).then(updateres => {\n        console.log(\"Amazon user has been updated: \" + JSON.stringify(updateres));\n        qry.createSession('amazon', agtSessData.amzuser, dispatch);\n      });\n    }\n\n    if (location.pathname === '/twauth') {\n      // console.log(\"Twitter agtSession data: \"+ JSON.stringify(agtSessData));\n      processAccessToken(location, 'twToken', agtSessData.data);\n      let sessObj = localStorage.getItem('twToken'); // console.log(\"Twitter session obj: \"+ JSON.stringify(sessObj));\n\n      let abortController = new AbortController();\n      const gUser = dbObj.userObj;\n      gUser.type = 'USER';\n      gUser.social['source'] = 'twitter';\n      gUser.dataorigin = 'social';\n      gUser.dataflow = 'ADDUSER';\n      gUser.subtype = 'TWITTER';\n      gUser.status = 'active'; //gUser.date = getFormattedDate(dt, '/');\n      //gUser.time = getFormattedTime(dt, ':');\n\n      if (sessObj) {\n        sessObj = JSON.parse(sessObj);\n        gUser.socialid = sessObj.user_id;\n        gUser.social['id'] = sessObj.user_id;\n        gUser.social['oauthtoken'] = sessObj.oauth_token;\n        gUser.social['oauthsecret'] = sessObj.oauth_token_secret;\n        gUser.social['token'] = sessObj;\n        gUser.name = sessObj.screen_name;\n        console.log('Twitter user: ' + JSON.stringify(gUser)); //  qry.createSession('twitter', sessObj, dispatch);\n\n        qry.addUpdateData('types/users', 'social.id', gUser, {\n          signal: abortController.signal\n        }).then(updateres => {\n          console.log(\"Twitter user has been updated: \" + JSON.stringify(updateres));\n          qry.createSession('twitter', sessObj, dispatch);\n        });\n      }\n    }\n  }, [location.pathname]);\n  return __jsx(HomeGrid, null, __jsx(Box, {\n    className: classes.bannerpanel\n  }, __jsx(Banner, null)), __jsx(Box, {\n    className: classes.centerpanel\n  }, __jsx(CenterPanel, null, useMediaProp('md') ? __jsx(React.Fragment, null, __jsx(Box, {\n    className: classes.centerpanelbox\n  }, __jsx(Box, {\n    className: classes.centerpanelboxtop\n  }, __jsx(TypoHdMerriweather, {\n    fsize: 2\n  }, \"All houses sold\")), __jsx(Box, {\n    className: classes.centerpanelboxbottom\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    gutterBottom: true\n  }, \"Check out all the properties we sold in the recent past.\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => history.push('/registerproperty')\n  }, \"See Homes sold\"))), __jsx(Box, {\n    className: classes.centerpanelbox\n  }, __jsx(Box, {\n    className: classes.centerpanelboxtop\n  }, __jsx(TypoHdMerriweather, {\n    fsize: 2\n  }, \"Free counselling\")), __jsx(Box, {\n    className: classes.centerpanelboxbottom\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    gutterBottom: true\n  }, \"Are you ready to take in the plunge. Have you work out the specifics? Why not get in touch with us for some free counselling.\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => history.push('/contact')\n  }, \"Get in touch\"))), __jsx(Box, {\n    className: classes.centerpanelbox\n  }, __jsx(Box, {\n    className: classes.centerpanelboxtop\n  }, __jsx(TypoHdMerriweather, {\n    fsize: 2\n  }, \"List my property\")), __jsx(Box, {\n    className: classes.centerpanelboxbottom\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    gutterBottom: true\n  }, \"Why not list your property with us and see the benefits for yourself.\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => history.push('/registerproperty')\n  }, \"List my property\")))) :\n  /*  <animated.img src='./img/savemax/SaveMaxLogo.png' width=\"100%\" height=\"40%\" style={p} /> */\n\n  /*  <img src='./img/savemax/SaveMaxLogo.png' width=\"100%\" height=\"40%\" style={p} /> */\n  __jsx(\"img\", {\n    src: \"./img/savemax/SaveMaxLogo.png\",\n    width: \"100%\",\n    height: \"40%\"\n  }))), __jsx(Box, {\n    className: classes.panel\n  }, __jsx(Paper, {\n    className: classes.panel1,\n    elevation: 3\n  }, \"One\")), __jsx(Box, {\n    className: classes.panel\n  }, __jsx(Paper, {\n    className: classes.panel1,\n    elevation: 3\n  }, \"Two\")), __jsx(Box, {\n    className: classes.panel\n  }, __jsx(Paper, {\n    className: classes.panel1,\n    elevation: 3\n  }, \"Three\")), __jsx(Box, {\n    className: classes.panel\n  }, __jsx(Paper, {\n    className: classes.panel1,\n    elevation: 3\n  }, \"four\")), __jsx(Box, {\n    className: classes.panel\n  }, __jsx(Paper, {\n    className: classes.panel1,\n    elevation: 3\n  }, \"Five\")), __jsx(Box, {\n    className: classes.centerpanel\n  }, __jsx(CenterPanel, null, __jsx(\"img\", {\n    className: classes.bannerimg,\n    src: \"./img/aboutme/harpreet_gill_banner.1.jpg\"\n  }))));\n};\n\nexport default Home;\n\nconst AnimHeader = props => {\n  return __jsx(Typography, {\n    variant: \"h4\",\n    gutterBottom: true,\n    style: {\n      opacity: props.opacity\n    }\n  }, \"I am about to be animated\");\n};","map":{"version":3,"sources":["/home/azure/spaces/reactapps/agt_basic/src/app/content/home/index.js"],"names":["React","useEffect","useLocation","useHistory","makeStyles","HomeGrid","Banner","CenterPanel","Box","Paper","Typography","Button","astyles","useMediaProp","TypoHdMerriweather","useAppContext","getEmailUserSvr","getFBUser","processAccessToken","qry","dbObj","useStyles","theme","root","bannerpanel","boxSizing","flexGrow","centerpanel","display","flex","centerpanelbox","flexFlow","justifyContent","alignItems","width","maxWidth","height","margin","boxShadow","borderRadius","backgroundColor","centerpanelboxtop","borderBottom","centerpanelboxbottom","panel","panel1","bannerimg","Home","props","classes","history","appstate","dispatch","location","window","scrollTo","pathname","dt","Date","abortController","AbortController","gUser","userObj","type","social","dataorigin","dataflow","subtype","status","agtSessData","id_token","access_token","refresh_token","expiry_date","then","res","console","log","JSON","stringify","fname","given_name","lname","family_name","socialid","id","email","addUpdateData","signal","updateres","createSession","catch","err","hash","fbToken","localStorage","getItem","parse","data_access_expiration_time","regex","n","exec","name","length","amzuser","user_id","expires_in","data","sessObj","oauth_token","oauth_token_secret","screen_name","push","AnimHeader","opacity"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport HomeGrid from '../../components/grids/homegrid';\nimport { Banner } from '../../components/banner';\nimport { CenterPanel } from '../../components/centerpanel';\nimport { Box, Paper, Typography, Button } from '@material-ui/core';\nimport theme from '../../theme';\n//import { useSpring, animated, config } from 'react-spring';\nimport * as astyles from '../../components/styles';\nimport { useMediaProp } from '../../lib/userhooks';\nimport { Cnv } from '../../components/cnvimg';\nimport { TypoHdMerriweather, Button1 } from '../../components/styles/styledcomponents';\nimport { useAppContext } from '../../lib/userhooks';\n\nimport { getAmzUser } from '../../data/auth/amzauth';\nimport { getEmailUser, getEmailUserSvr } from '../../data/auth/googleauth';\nimport { getFBUser, getFBUser1 } from '../../data/auth/fbauth';\nimport { setRedis } from '../../data/db/queries';\nimport { setCookie, processAccessToken, getFormattedDate, getFormattedTime } from '../../lib/utils';\nimport qry from '../../data/db/queries';\nimport dbObj from '../../data/db/dbobj';\n\n\n\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n\n  },\n  bannerpanel: {\n    boxSizing: 'border-box',\n    flexGrow: 1,\n\n  },\n  centerpanel: {\n    boxSizing: 'border-box',\n    display: 'flex',\n\n    flex: 'auto',\n\n\n  },\n\n  centerpanelbox: {\n    boxSizing: 'border-box',\n    display: 'flex',\n    flex: 'auto',\n    flexFlow: 'row wrap',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    width: '30%',\n    maxWidth: '30%',\n    height: '80%',\n    margin: 'auto',\n    boxShadow: '0px 0px 25px rgba(200,200,200,0.5)',\n    borderRadius: 3,\n    backgroundColor: 'rgb(255,255,255)',\n  },\n  centerpanelboxtop: {\n    boxSizing: 'border-box',\n    display: 'flex',\n    flex: 'auto',\n    flexFlow: 'row wrap',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    width: '90%',\n    maxWidth: '90%',\n    height: '40%',\n    margin: 'auto',\n    borderBottom: \"1px solid rgb(200,200,200)\",\n\n\n  },\n  centerpanelboxbottom: {\n    boxSizing: 'border-box',\n    display: 'flex',\n    flex: 'auto',\n    flexFlow: 'row wrap',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    width: '90%',\n    maxWidth: '90%',\n    height: '60%',\n    margin: 'auto',\n\n  },\n\n  panel: astyles.panel(theme),\n  panel1: astyles.panel1(theme),\n  bannerimg: {\n    width: '100%',\n    height: 'auto',\n\n  }\n\n}));\n\nconst Home = (props) => {\n  const classes = useStyles();\n  //const p = useSpring({ to: { opacity: 1.0 }, from: { opacity: 0.0 }, config: { duration: 3000 } });\n  const history = useHistory();\n  const { appstate, dispatch } = useAppContext();\n\n  // console.log('User: ' + JSON.stringify(appstate.user));\n\n  const location = useLocation();\n\n  // console.log('HOME Location: ' + JSON.stringify(location));\n\n  // const socket = io();\n  // socket.emit('ok',' a new messate');\n\n\n\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [location.pathname]);\n\n  useEffect(() => {\n\n    const dt = new Date();\n\n    if (location.pathname === '/gauth'\n      // && location.hash \n      // && (typeof location.hash !== 'undefined')\n      //&& location.hash !== \"\"\n    ) {\n      let abortController = new AbortController();\n      const gUser = dbObj.userObj;\n\n      gUser.type = 'USER';\n      gUser.social['source'] = 'google';\n      gUser.dataorigin = 'social';\n      gUser.dataflow = 'ADDUSER';\n      gUser.subtype = 'GOOGLE';\n      gUser.status = 'active';\n      // gUser.date = getFormattedDate(dt, '/');\n      // gUser.time = getFormattedTime(dt, ':');\n\n      gUser.social['idtoken'] = agtSessData.id_token;\n      gUser.social['accesstoken'] = agtSessData.access_token;\n      gUser.social['refreshtoken'] = agtSessData.refresh_token;\n      gUser.social['tokenexpirydate'] = agtSessData.expiry_date;\n\n      processAccessToken(location, 'googleToken', agtSessData);\n\n\n      if (agtSessData['access_token']) {\n\n        getEmailUserSvr(agtSessData['access_token'])\n          .then(res => {\n            console.log(\"G user: \" + JSON.stringify(res));\n            gUser.fname = res.given_name;\n            gUser.lname = res.family_name;\n            gUser.socialid = res.id;\n            gUser.social['id'] = res.id;\n            gUser.social['socialemail'] = res.email;\n            gUser.email = res.email;\n\n            // console.log('Google mapped G User: '+ JSON.stringify(gUser));\n\n            // qry.createSession('google',res, dispatch);\n\n\n            qry.addUpdateData('types/users', 'social.id', gUser, { signal: abortController.signal })\n              .then(updateres => {\n                console.log(\"Guser has been updated: \" + JSON.stringify(updateres));\n                qry.createSession('google', res, dispatch);\n              })\n\n          })\n          .catch(err => { console.log(\"Google Auth Error: \" + JSON.stringify(err)) });\n      }\n    }\n\n    if (\n      location.pathname === '/fbauth'\n      && location.hash\n      && (typeof location.hash !== 'undefined')\n      && location.hash !== \"\"\n    ) {\n      console.log('Calling save fb code');\n      let abortController = new AbortController();\n\n      const gUser = dbObj.userObj;\n      gUser.type = 'USER';\n      gUser.social['source'] = 'facebook';\n      gUser.dataorigin = 'social';\n      gUser.dataflow = 'ADDUSER';\n      gUser.subtype = 'FACEBOOK';\n      gUser.status = 'active';\n      //   gUser.date = getFormattedDate(dt, '/');\n      //   gUser.time = getFormattedTime(dt, ':');\n\n\n\n      //  gUser.social['idtoken'] = agtSessData.id_token;\n\n      //  gUser.social['refreshtoken'] = agtSessData.refresh_token;\n\n\n\n\n      processAccessToken(location, 'fbToken');\n\n      let fbToken = localStorage.getItem('fbToken');\n\n      if (fbToken) {\n        fbToken = JSON.parse(fbToken);\n        gUser.social['accesstoken'] = fbToken.access_token;\n        gUser.social['tokenexpirydate'] = fbToken.data_access_expiration_time;\n\n      }\n\n      // console.log(\"FB token: : \"+ fbToken);\n\n      const regex = /(.*)(\\s+)(.*)/g;\n\n\n\n\n      getFBUser()\n        .then(res => {\n          //console.log('FB User: '+JSON.stringify(res));\n          let n = regex.exec(res.name);\n          //console.log('Name : '+n[1]);\n          if (n && n.length > 2) {\n            gUser.fname = n[1];\n            gUser.lname = n[3];\n          } else {\n            gUser.name = res.name;\n          }\n\n\n          gUser.socialid = res.id;\n          gUser.social['id'] = res.id;\n          gUser.social['socialemail'] = res.email;\n          gUser.email = res.email;\n\n          //  console.log('Guser for FB: '+ JSON.stringify(gUser));\n\n          qry.addUpdateData('types/users', 'social.id', gUser, { signal: abortController.signal })\n            .then(updateres => {\n              console.log(\"FBuser has been updated: \" + JSON.stringify(updateres));\n              qry.createSession('facebook', res, dispatch);\n            })\n\n\n        });\n\n\n\n    }\n    //    console.log('Call FB to process the token after:: '+ localStorage.getItem('fb_code'));\n\n\n    if (location.pathname === '/amzauth') {\n\n\n\n      let abortController = new AbortController();\n      const regex = /(.*)(\\s+)(.*)/g;\n\n      const gUser = dbObj.userObj;\n      gUser.type = 'USER';\n      gUser.social['source'] = 'amazon';\n      gUser.dataorigin = 'social';\n      gUser.dataflow = 'ADDUSER';\n      gUser.subtype = 'AMAZON';\n      gUser.status = 'active';\n      // gUser.date = getFormattedDate(dt, '/');\n      // gUser.time = getFormattedTime(dt, ':');\n\n      gUser.socialid = agtSessData.amzuser.user_id;\n      gUser.social['id'] = agtSessData.amzuser.user_id;\n      gUser.social['socialemail'] = agtSessData.amzuser.email;\n      gUser.email = agtSessData.amzuser.email;\n\n      gUser.social['accesstoken'] = agtSessData.access_token.access_token;\n      gUser.social['refreshtoken'] = agtSessData.access_token.refresh_token;\n      gUser.social['tokenexpirydate'] = agtSessData.access_token.expires_in;\n\n      gUser.social['token'] = agtSessData.access_token;\n      gUser.social['user'] = agtSessData.amzuser;\n\n\n      let n = regex.exec(agtSessData.amzuser.name);\n\n      if (n && n.length > 2) {\n        gUser.fname = n[1];\n        gUser.lname = n[3];\n      } else {\n        gUser.name = n[0];\n      }\n\n\n\n      //    console.log(\"Amazon sess data: \"+ JSON.stringify(gUser));\n\n\n      //  qry.createSession('amazon', agtSessData.amzuser, dispatch);\n\n      qry.addUpdateData('types/users', 'social.id', gUser, { signal: abortController.signal })\n        .then(updateres => {\n          console.log(\"Amazon user has been updated: \" + JSON.stringify(updateres));\n          qry.createSession('amazon', agtSessData.amzuser, dispatch);\n        })\n    }\n\n\n    if (location.pathname === '/twauth') {\n\n      // console.log(\"Twitter agtSession data: \"+ JSON.stringify(agtSessData));\n\n      processAccessToken(location, 'twToken', agtSessData.data);\n\n      let sessObj = localStorage.getItem('twToken');\n\n\n      // console.log(\"Twitter session obj: \"+ JSON.stringify(sessObj));\n\n\n      let abortController = new AbortController();\n\n\n      const gUser = dbObj.userObj;\n      gUser.type = 'USER';\n      gUser.social['source'] = 'twitter';\n      gUser.dataorigin = 'social';\n      gUser.dataflow = 'ADDUSER';\n      gUser.subtype = 'TWITTER';\n      gUser.status = 'active';\n      //gUser.date = getFormattedDate(dt, '/');\n      //gUser.time = getFormattedTime(dt, ':');\n\n\n\n\n\n\n      if (sessObj) {\n        sessObj = JSON.parse(sessObj);\n\n        gUser.socialid = sessObj.user_id;\n        gUser.social['id'] = sessObj.user_id;\n        gUser.social['oauthtoken'] = sessObj.oauth_token;\n        gUser.social['oauthsecret'] = sessObj.oauth_token_secret;\n        gUser.social['token'] = sessObj;\n        gUser.name = sessObj.screen_name;\n\n\n        console.log('Twitter user: ' + JSON.stringify(gUser));\n\n\n        //  qry.createSession('twitter', sessObj, dispatch);\n\n        qry.addUpdateData('types/users', 'social.id', gUser, { signal: abortController.signal })\n          .then(updateres => {\n            console.log(\"Twitter user has been updated: \" + JSON.stringify(updateres));\n            qry.createSession('twitter', sessObj, dispatch);\n          })\n      }\n    }\n  }, [location.pathname]);\n\n\n  return (\n    <HomeGrid>\n      <Box className={classes.bannerpanel}>\n        <Banner />\n      </Box>\n\n      <Box className={classes.centerpanel}>\n        <CenterPanel >\n          {useMediaProp('md')\n            ?\n            <>\n              <Box className={classes.centerpanelbox}>\n                <Box className={classes.centerpanelboxtop}>\n                  <TypoHdMerriweather fsize={2}>\n                    All houses sold\n                  </TypoHdMerriweather>\n                </Box>\n                <Box className={classes.centerpanelboxbottom}>\n                  <Typography variant=\"body1\" gutterBottom>\n                    Check out all the properties we sold in the recent past.\n                  </Typography>\n                  <Button variant=\"contained\" color=\"primary\" onClick={() => history.push('/registerproperty')}>\n                    See Homes sold\n                  </Button>\n                </Box>\n              </Box>\n              <Box className={classes.centerpanelbox}>\n                <Box className={classes.centerpanelboxtop}>\n                  <TypoHdMerriweather fsize={2}>\n                    Free counselling\n                    </TypoHdMerriweather>\n                </Box>\n                <Box className={classes.centerpanelboxbottom}>\n                  <Typography variant=\"body1\" gutterBottom>\n                    Are you ready to take in the plunge. Have you work out the specifics?\n                    Why not get in touch with us for some free counselling.\n                  </Typography>\n                  <Button variant=\"contained\" color=\"primary\" onClick={() => history.push('/contact')}>\n                    Get in touch\n                  </Button>\n                </Box>\n              </Box>\n              <Box className={classes.centerpanelbox}>\n                <Box className={classes.centerpanelboxtop}>\n                  <TypoHdMerriweather fsize={2}>\n                    List my property\n                    </TypoHdMerriweather>\n                </Box>\n                <Box className={classes.centerpanelboxbottom}>\n                  <Typography variant=\"body1\" gutterBottom>\n                    Why not list your property with us and see the benefits for yourself.\n                  </Typography>\n                  <Button variant=\"contained\" color=\"primary\" onClick={() => history.push('/registerproperty')}>\n                    List my property\n                  </Button>\n                </Box>\n              </Box>\n            </>\n            :\n\n            /*  <animated.img src='./img/savemax/SaveMaxLogo.png' width=\"100%\" height=\"40%\" style={p} /> */\n\n            /*  <img src='./img/savemax/SaveMaxLogo.png' width=\"100%\" height=\"40%\" style={p} /> */\n                <img src='./img/savemax/SaveMaxLogo.png' width=\"100%\" height=\"40%\" />\n\n          }\n\n\n        </CenterPanel>\n\n      </Box>\n\n\n      <Box className={classes.panel}>\n        <Paper className={classes.panel1} elevation={3}>\n          One\n          </Paper>\n      </Box>\n      <Box className={classes.panel}>\n        <Paper className={classes.panel1} elevation={3}>\n          Two\n          </Paper>\n      </Box>\n      <Box className={classes.panel}>\n        <Paper className={classes.panel1} elevation={3}>\n          Three\n          </Paper>\n      </Box>\n      <Box className={classes.panel}>\n        <Paper className={classes.panel1} elevation={3}>\n          four\n          </Paper>\n      </Box>\n      <Box className={classes.panel}>\n        <Paper className={classes.panel1} elevation={3}>\n          Five\n          </Paper>\n      </Box>\n      <Box className={classes.centerpanel}>\n        <CenterPanel>\n          <img className={classes.bannerimg} src='./img/aboutme/harpreet_gill_banner.1.jpg' />\n          {/*useMediaProp('md')\n            ?\n            <img className={classes.bannerimg} src='./img/aboutme/harpreet_gill_banner.1.jpg'  /> \n            :\n\n            <img src='./img/aboutme/harpreet_gill.1.2.jpg' width=\"auto\" height=\"100%\"  /> \n\n\n        */}\n\n\n        </CenterPanel>\n      </Box>\n\n    </HomeGrid>\n  );\n\n}\n\nexport default Home;\n\nconst AnimHeader = (props) => {\n\n  return (\n    <Typography variant=\"h4\" gutterBottom style={{ opacity: props.opacity }}>\n      I am about to be animated\n    </Typography>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}